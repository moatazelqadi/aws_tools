{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Resources": {
      "HelloWorld": {
        "Type": "AWS::Lambda::Function",
        "Properties": {
          "FunctionName": "",
          "Handler": handler",
          "Role": {
            "Fn::GetAtt": [
              "HelloWorldLambdaRole",
              "Arn"
            ]
          },       
          "Code": {
            "S3Bucket": "cm-lambda-code-deploy",
            "S3Key": "hello-world.zip"
          },
          "Runtime": "nodejs12.x"  
        }
      },
      "HelloWorldLambdaRole": {
        "Type": "AWS::IAM::Role",
        "Properties": {
          "RoleName": "HelloWorldLambdaRole",
          "AssumeRolePolicyDocument": {
            "Version": "2012-10-17",
            "Statement": [{
              "Effect": "Allow",
              "Principal": {
                "Service": [ "lambda.amazonaws.com" ]
              },
              "Action": [ "sts:AssumeRole" ]
            }]
          },
          "Path": "/",
          "Policies": [{
            "PolicyName": "AWSLambdaBasicExecutionRole",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [{
                "Effect": "Allow",
                "Action": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "Resource": "*"
              }]
            }
          }]
        }
      }
    }
  }